<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Under The Hood | Vue Advanced Cropper</title>
    <meta name="description" content="The flexible vue cropper component that gives you the opportunity to create almost any cropper that you desire">
    <link rel="icon" href="/vue-advanced-cropper/favicon.png">
    
    <link rel="preload" href="/vue-advanced-cropper/assets/css/0.styles.446576c8.css" as="style"><link rel="preload" href="/vue-advanced-cropper/assets/js/app.40f395c2.js" as="script"><link rel="preload" href="/vue-advanced-cropper/assets/js/9.6627b1df.js" as="script"><link rel="preload" href="/vue-advanced-cropper/assets/js/63.824f7544.js" as="script"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/1.fd0539e2.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/10.f41d3917.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/11.495ee984.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/12.e049e411.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/13.4bbfcf6a.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/14.fafca21b.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/15.0314f77e.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/16.1c8d72da.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/17.86936c24.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/18.2b7be722.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/19.d99f31fc.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/2.16ec82c8.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/20.a1195321.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/21.bfd36902.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/22.8314d8cf.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/23.4315fb21.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/24.6559c247.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/25.68746f33.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/26.41cc3ccf.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/27.c73f2778.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/28.8ae117e9.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/29.40823a76.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/3.73d5b54f.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/30.d672dee0.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/31.fe937595.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/32.491564df.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/33.605d0143.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/34.549e0db0.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/35.e7e2753a.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/36.9b60a7fc.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/37.344a2a8f.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/38.01db8acf.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/39.5dbff13e.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/40.2225abcf.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/41.53aa2aad.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/42.842e0196.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/43.1c4829c6.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/44.81003ec3.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/45.c1c92271.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/46.f5d685bf.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/47.a028991d.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/48.90a69f10.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/49.0958b9a2.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/5.196c3765.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/50.040d476a.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/51.8a1d9f9c.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/52.3730d22b.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/53.c92e1755.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/54.748704b2.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/55.b658f4b4.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/56.bc190f08.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/57.8be0e607.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/58.8fe705de.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/59.0529d9af.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/6.75b936e0.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/60.03cef5f0.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/61.f8148da0.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/62.c26c5374.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/64.6a86b388.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/65.63881297.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/66.7b9b76bc.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/67.e539b0c8.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/68.ca2f1e13.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/69.18c7a29b.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/7.2cf24ac0.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/70.89c69bae.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/71.c297c3f9.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/72.6584babb.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/73.266f5c00.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/74.212fc78b.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/75.f6fb7f09.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/76.bfa446ad.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/77.c2da9b02.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/78.25187efa.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/79.b1204804.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/8.8097a8eb.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/80.59631f94.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/81.b213e5b5.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/82.ee94935c.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/83.34c2ee46.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/84.eef04224.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/85.ae23a92f.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/86.7ee000fa.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/87.b800d579.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/88.d392a72d.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/89.2c66f81f.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/90.54f4c1f7.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/91.33c3997a.js"><link rel="prefetch" href="/vue-advanced-cropper/assets/js/92.01afa9f0.js">
    <link rel="stylesheet" href="/vue-advanced-cropper/assets/css/0.styles.446576c8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-advanced-cropper/" class="home-link router-link-active"><!----> <span class="site-name">Vue Advanced Cropper</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-advanced-cropper/" class="nav-link">Home</a></div><div class="nav-item"><a href="/vue-advanced-cropper/introduction/getting-started.html" class="nav-link">Docs</a></div><div class="nav-item"><a href="http://github.com/Norserium/vue-advanced-cropper/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/Norserium/vue-advanced-cropper" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue-advanced-cropper/" class="nav-link">Home</a></div><div class="nav-item"><a href="/vue-advanced-cropper/introduction/getting-started.html" class="nav-link">Docs</a></div><div class="nav-item"><a href="http://github.com/Norserium/vue-advanced-cropper/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/Norserium/vue-advanced-cropper" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-advanced-cropper/introduction/getting-started.html" class="sidebar-link">Getting started</a></li><li><a href="/vue-advanced-cropper/introduction/concepts.html" class="sidebar-link">Concepts</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guides</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-advanced-cropper/guides/recipes.html" class="sidebar-link">Recipes</a></li><li><a href="/vue-advanced-cropper/guides/advanced-recipes.html" class="sidebar-link">Advanced Recipes</a></li><li><a href="/vue-advanced-cropper/guides/theming.html" class="sidebar-link">Theming</a></li><li><a href="/vue-advanced-cropper/guides/customize-appearance.html" class="sidebar-link">Customize appearance</a></li><li><a href="/vue-advanced-cropper/guides/custom-stencil.html" class="sidebar-link">Advanced stencil</a></li><li><a href="/vue-advanced-cropper/guides/showcase.html" class="sidebar-link">Showcase</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Events</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-advanced-cropper/events/move-event.html" class="sidebar-link">Move Event</a></li><li><a href="/vue-advanced-cropper/events/resize-event.html" class="sidebar-link">Resize Event</a></li><li><a href="/vue-advanced-cropper/events/drag-event.html" class="sidebar-link">Drag Event</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Components</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-advanced-cropper/components/cropper.html" class="sidebar-link">Cropper</a></li><li><a href="/vue-advanced-cropper/components/rectangle-stencil.html" class="sidebar-link">Rectangle stencil</a></li><li><a href="/vue-advanced-cropper/components/circle-stencil.html" class="sidebar-link">Circle stencil</a></li><li><a href="/vue-advanced-cropper/components/bounding-box.html" class="sidebar-link">Bounding box</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Algorithms</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="under-the-hood"><a href="#under-the-hood" aria-hidden="true" class="header-anchor">#</a> Under The Hood</h1> <h2 id="basic-methods"><a href="#basic-methods" aria-hidden="true" class="header-anchor">#</a> Basic methods</h2> <h3 id="refresh-image"><a href="#refresh-image" aria-hidden="true" class="header-anchor">#</a> Refresh image</h3> <p>The image is refreshed on change the <code>src</code> prop and on the cropper's mount.</p> <div class="warning custom-block"><p class="custom-block-title">Notice!</p> <p>The internal process of <code>refresh</code> method is described below.</p></div> <ol><li>First of all, stretcher is initialized. By default <code>initStretcher</code> method tries to
fit to external container image completely by defining to stretcher element its width and height.</li></ol> <p><img src="/vue-advanced-cropper/assets/img/stretching.c9ed233c.svg" alt="Example"></p> <ol start="2"><li><p>Cropper waits rerender to await the changing of external container size.</p></li> <li><p>After rerender, the cropper determines the boundaries size by calling <code>boundaries</code> method and getting its result to
set <code>boundaries</code> value.</p></li> <li><p>After boundaries is determined, the visible area coordinates is calculated by method <code>defaultVisibleArea</code>.
The cropper always checks that visible area ratio is equal to the boundaries aspect ratio, if it's not equal,
cropper recalculates visible area height to corresponding aspect ratio of the boundaries.</p></li> <li><p>After calculating boundaries and visible area <code>updateVisibleArea</code> methods is called. This method tries do adapt
calculated visible area on previous step to the previous <code>visibleArea</code> value, current <code>coordinates</code> and <code>boundaries</code>.</p></li> <li><p>Cropper checks that coordinates fits inside visible area. If it's not cropper adapts coordinates to fit to
visible area. It may break minimum width and minimum height restrictions but it always preserve aspect ratio restrictions.</p></li> <li><p>The internal values <code>visibleArea</code> and <code>coordinates</code> are updated.</p></li></ol> <h3 id="reset-coordinates"><a href="#reset-coordinates" aria-hidden="true" class="header-anchor">#</a> Reset coordinates</h3> <p>The coordinates resets on each successful image change.</p> <div class="warning custom-block"><p class="custom-block-title">Notice!</p> <p>The internal process of <code>resetCoordinates</code> method is described below.</p></div> <ol><li><p>Calculate default size with <code>defaultSize</code> method. It returns the object with <code>width</code> and <code>height</code> fields.</p></li> <li><p>Calculate default position with <code>defaultPosition</code>. It returns the object with <code>left</code> and <code>top</code> fields.</p></li> <li><p>Form default transforms array <code>[{ width, height }, { left, top}]</code> where <code>width</code>, <code>height</code>, <code>left</code> and <code>top</code> are fields calculated before.</p></li> <li><p>If there was delayed transforms, i.e. transforms that was applied after change image but before it was loaded, append them to the transforms array.
It's needed to give the possibility</p></li> <li><p>Apply transforms.</p></li></ol> <h3 id="apply-transforms"><a href="#apply-transforms" aria-hidden="true" class="header-anchor">#</a> Apply transforms</h3> <p>It's the main way to update <code>coordinates</code>.</p> <p>It is used every time when need to independently change coordinates (<code>setCoordinates</code>, <code>resetCoordinates</code>) or adapt current coordinates to props changes (<code>minWidth</code>, <code>maxWidth</code>, <code>minHeight</code>, <code>maxHeight</code>).</p> <div class="warning custom-block"><p class="custom-block-title">Notice!</p> <p>The internal process of <code>applyTransforms</code> method is described below. You shouldn't call this method himself.</p></div> <p>This method has two parameters <code>transforms</code> and <code>autoZoom</code>.
The first parameter is an object of coordinates or array with one objects.
The second parameter indicates should be auto zoom (i.e. translating and resizing visible area to fit new coordinates) is used or not.</p> <p>For each a transform:</p> <ol><li><p>If there is <code>width</code> or <code>height</code> field in the transform generate the box by <code>approximiatedSize</code> algorithm that creates
the box with width and height similar to given one with respect to the limitations (aspect ratio, maximum and minimum values of one).
After that cropper tries to return the box to its previous coordinates with respect to limitations returns by <code>positionRestrictions</code>, but not
visible area (i.e. stencil can leave the current visible area).</p></li> <li><p>If there is <code>left</code> or <code>top</code> field in the transform cropper moves box to given coordinates. Yet again, with respect to <code>positionRestrictions</code>, but not <code>visibleArea</code>.</p></li></ol> <p>After all transformations, if <code>autoZoom</code> parameter is set, apply auto zoom algorithm to transform visible area in such way that coordinates
fits into it.</p> <p>At the end, this method calls <code>onChangeCoordinates</code> method, that updates internal coordinates and emit corresponding event.</p> <h2 id="what-s-happens-when"><a href="#what-s-happens-when" aria-hidden="true" class="header-anchor">#</a> What's happens when?</h2> <h3 id="resize-window"><a href="#resize-window" aria-hidden="true" class="header-anchor">#</a> Resize window</h3> <ol><li><p>Refresh image by <code>refresh</code> method.</p></li> <li><p>Update stencil coordinates.</p></li></ol> <h3 id="change-image"><a href="#change-image" aria-hidden="true" class="header-anchor">#</a> Change image</h3> <p>The following cycle runs when image is changed.</p> <ol><li><p>If <code>checkOrientation</code> is true cropper send request to get the binary representation of image.
If the image was received and it has <code>jpg</code> image type, the image orientation is parsed and used
in the future.</p></li> <li><p>After image was loaded <code>refreshImage</code> is called and image is refreshed as written above.</p></li> <li><p>Reset coordinates.</p></li> <li><p>Update stencil coordinates.</p></li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Norserium/vue-advanced-cropper/edit/master/example/docs/introduction/under-the-hood.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/vue-advanced-cropper/assets/js/app.40f395c2.js" defer></script><script src="/vue-advanced-cropper/assets/js/9.6627b1df.js" defer></script><script src="/vue-advanced-cropper/assets/js/63.824f7544.js" defer></script>
  </body>
</html>
