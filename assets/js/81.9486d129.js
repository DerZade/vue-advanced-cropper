(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{631:function(e,t,a){e.exports=a.p+"assets/img/stretching.d7359437.svg"},828:function(e,t,a){"use strict";a.r(t);var i=a(66),o=Object(i.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"under-the-hood"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#under-the-hood"}},[e._v("#")]),e._v(" Under The Hood")]),e._v(" "),t("h2",{attrs:{id:"basic-methods"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#basic-methods"}},[e._v("#")]),e._v(" Basic methods")]),e._v(" "),t("h3",{attrs:{id:"refresh-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#refresh-image"}},[e._v("#")]),e._v(" Refresh image")]),e._v(" "),t("p",[e._v("The image is refreshed on change the "),t("code",[e._v("src")]),e._v(" prop and on the cropper's mount.")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("Notice!")]),e._v(" "),t("p",[e._v("The internal process of "),t("code",[e._v("refresh")]),e._v(" method is described below.")])]),e._v(" "),t("ol",[t("li",[e._v("First of all, stretcher is initialized. By default "),t("code",[e._v("initStretcher")]),e._v(" method tries to\nfit to external container image completely by defining to stretcher element its width and height.")])]),e._v(" "),t("p",[t("img",{attrs:{src:a(631),alt:"Example"}})]),e._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[t("p",[e._v("Cropper waits rerender to await the changing of external container size.")])]),e._v(" "),t("li",[t("p",[e._v("After rerender, the cropper determines the boundaries size by calling "),t("code",[e._v("boundaries")]),e._v(" method and getting its result to\nset "),t("code",[e._v("boundaries")]),e._v(" value.")])]),e._v(" "),t("li",[t("p",[e._v("After boundaries is determined, the visible area coordinates is calculated by method "),t("code",[e._v("defaultVisibleArea")]),e._v(".\nThe cropper always checks that visible area ratio is equal to the boundaries aspect ratio, if it's not equal,\ncropper recalculates visible area height to corresponding aspect ratio of the boundaries.")])]),e._v(" "),t("li",[t("p",[e._v("After calculating boundaries and visible area "),t("code",[e._v("updateVisibleArea")]),e._v(" methods is called. This method tries do adapt\ncalculated visible area on previous step to the previous "),t("code",[e._v("visibleArea")]),e._v(" value, current "),t("code",[e._v("coordinates")]),e._v(" and "),t("code",[e._v("boundaries")]),e._v(".")])]),e._v(" "),t("li",[t("p",[e._v("Cropper checks that coordinates fits inside visible area. If it's not cropper adapts coordinates to fit to\nvisible area. It may break minimum width and minimum height restrictions but it always preserve aspect ratio restrictions.")])]),e._v(" "),t("li",[t("p",[e._v("The internal values "),t("code",[e._v("visibleArea")]),e._v(" and "),t("code",[e._v("coordinates")]),e._v(" are updated.")])])]),e._v(" "),t("h3",{attrs:{id:"reset-coordinates"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reset-coordinates"}},[e._v("#")]),e._v(" Reset coordinates")]),e._v(" "),t("p",[e._v("The coordinates resets on each successful image change.")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("Notice!")]),e._v(" "),t("p",[e._v("The internal process of "),t("code",[e._v("resetCoordinates")]),e._v(" method is described below.")])]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Calculate default size with "),t("code",[e._v("defaultSize")]),e._v(" method. It returns the object with "),t("code",[e._v("width")]),e._v(" and "),t("code",[e._v("height")]),e._v(" fields.")])]),e._v(" "),t("li",[t("p",[e._v("Calculate default position with "),t("code",[e._v("defaultPosition")]),e._v(". It returns the object with "),t("code",[e._v("left")]),e._v(" and "),t("code",[e._v("top")]),e._v(" fields.")])]),e._v(" "),t("li",[t("p",[e._v("Form default transforms array "),t("code",[e._v("[{ width, height }, { left, top}]")]),e._v(" where "),t("code",[e._v("width")]),e._v(", "),t("code",[e._v("height")]),e._v(", "),t("code",[e._v("left")]),e._v(" and "),t("code",[e._v("top")]),e._v(" are fields calculated before.")])]),e._v(" "),t("li",[t("p",[e._v("If there was delayed transforms, i.e. transforms that was applied after change image but before it was loaded, append them to the transforms array.\nIt's needed to give the possibility")])]),e._v(" "),t("li",[t("p",[e._v("Apply transforms.")])])]),e._v(" "),t("h3",{attrs:{id:"apply-transforms"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apply-transforms"}},[e._v("#")]),e._v(" Apply transforms")]),e._v(" "),t("p",[e._v("It's the main way to update "),t("code",[e._v("coordinates")]),e._v(".")]),e._v(" "),t("p",[e._v("It is used every time when need to independently change coordinates ("),t("code",[e._v("setCoordinates")]),e._v(", "),t("code",[e._v("resetCoordinates")]),e._v(") or adapt current coordinates to props changes ("),t("code",[e._v("minWidth")]),e._v(", "),t("code",[e._v("maxWidth")]),e._v(", "),t("code",[e._v("minHeight")]),e._v(", "),t("code",[e._v("maxHeight")]),e._v(").")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("Notice!")]),e._v(" "),t("p",[e._v("The internal process of "),t("code",[e._v("applyTransforms")]),e._v(" method is described below. You shouldn't call this method himself.")])]),e._v(" "),t("p",[e._v("This method has two parameters "),t("code",[e._v("transforms")]),e._v(" and "),t("code",[e._v("autoZoom")]),e._v(".\nThe first parameter is an object of coordinates or array with one objects.\nThe second parameter indicates should be auto zoom (i.e. translating and resizing visible area to fit new coordinates) is used or not.")]),e._v(" "),t("p",[e._v("For each a transform:")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("If there is "),t("code",[e._v("width")]),e._v(" or "),t("code",[e._v("height")]),e._v(" field in the transform generate the box by "),t("code",[e._v("approximiatedSize")]),e._v(" algorithm that creates\nthe box with width and height similar to given one with respect to the limitations (aspect ratio, maximum and minimum values of one).\nAfter that cropper tries to return the box to its previous coordinates with respect to limitations returns by "),t("code",[e._v("positionRestrictions")]),e._v(", but not\nvisible area (i.e. stencil can leave the current visible area).")])]),e._v(" "),t("li",[t("p",[e._v("If there is "),t("code",[e._v("left")]),e._v(" or "),t("code",[e._v("top")]),e._v(" field in the transform cropper moves box to given coordinates. Yet again, with respect to "),t("code",[e._v("positionRestrictions")]),e._v(", but not "),t("code",[e._v("visibleArea")]),e._v(".")])])]),e._v(" "),t("p",[e._v("After all transformations, if "),t("code",[e._v("autoZoom")]),e._v(" parameter is set, apply auto zoom algorithm to transform visible area in such way that coordinates\nfits into it.")]),e._v(" "),t("p",[e._v("At the end, this method calls "),t("code",[e._v("onChangeCoordinates")]),e._v(" method, that updates internal coordinates and emit corresponding event.")]),e._v(" "),t("h2",{attrs:{id:"what-s-happens-when"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#what-s-happens-when"}},[e._v("#")]),e._v(" What's happens when?")]),e._v(" "),t("h3",{attrs:{id:"resize-window"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resize-window"}},[e._v("#")]),e._v(" Resize window")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Refresh image by "),t("code",[e._v("refresh")]),e._v(" method.")])]),e._v(" "),t("li",[t("p",[e._v("Update stencil coordinates.")])])]),e._v(" "),t("h3",{attrs:{id:"change-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#change-image"}},[e._v("#")]),e._v(" Change image")]),e._v(" "),t("p",[e._v("The following cycle runs when image is changed.")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("If "),t("code",[e._v("checkOrientation")]),e._v(" is true cropper send request to get the binary representation of image.\nIf the image was received and it has "),t("code",[e._v("jpg")]),e._v(" image type, the image orientation is parsed and used\nin the future.")])]),e._v(" "),t("li",[t("p",[e._v("After image was loaded "),t("code",[e._v("refreshImage")]),e._v(" is called and image is refreshed as written above.")])]),e._v(" "),t("li",[t("p",[e._v("Reset coordinates.")])]),e._v(" "),t("li",[t("p",[e._v("Update stencil coordinates.")])])])])}),[],!1,null,null,null);t.default=o.exports}}]);