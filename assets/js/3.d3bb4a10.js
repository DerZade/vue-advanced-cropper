(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{11:function(e,t,i){"use strict";i.d(t,"a",function(){return X}),i.d(t,"b",function(){return He}),i.d(t,"c",function(){return I}),i.d(t,"d",function(){return E}),i.d(t,"e",function(){return te}),i.d(t,"f",function(){return y});i(265),i(268),i(270),i(113),i(278),i(281),i(196);var n=i(282),o=(i(290),i(291),i(294),i(296),i(297),i(67),i(82),i(0));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i,n=0;n<t.length;n++)(i=t[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function h(e){for(var t=1;t<arguments.length;t++){var i=null==arguments[t]?{}:arguments[t],n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){a(e,t,i[t])})}return e}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l,d=(function(e){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
  */
!function(){function t(){for(var e,o=[],s=0;s<arguments.length;s++)if(e=arguments[s]){var r=Object(n.a)(e);if("string"===r||"number"===r)o.push(e);else if(Array.isArray(e)&&e.length){var a=t.apply(null,e);a&&o.push(a)}else if("object"===r)for(var h in e)i.call(e,h)&&e[h]&&o.push(h)}return o.join(" ")}var i={}.hasOwnProperty;e.exports?(t.default=t,e.exports=t):window.classNames=t}()}(l={exports:{}},l.exports),l.exports),u=function(e){return function(t,i){if(!t)return e;var n;"string"==typeof t?n=t:i=t;var o=e;return n&&(o+="__"+n),o+(i?Object.keys(i).reduce(function(e,t){var n=i[t];return n&&(e+=" "+("boolean"==typeof n?o+"--"+t:o+"--"+t+"_"+n)),e},""):"")}};function m(e,t,i){function n(){var c=Date.now()-a;c<t&&0<=c?o=setTimeout(n,t-c):(o=null,!i&&(h=e.apply(r,s),r=s=null))}var o,s,r,a,h;null==t&&(t=100);var c=function(){r=this,s=arguments,a=Date.now();var c=i&&!o;return o||(o=setTimeout(n,t)),c&&(h=e.apply(r,s),r=s=null),h};return c.clear=function(){o&&(clearTimeout(o),o=null)},c.flush=function(){o&&(h=e.apply(r,s),r=s=null,clearTimeout(o),o=null)},c}m.debounce=m;var p=m;function f(e,t){var i,n;return e&&t?(i="".concat(e).concat(t[0].toUpperCase()).concat(t.slice(1)),n="".concat(e,"-").concat(t)):(i=e||t,n=e||t),{name:i,classname:n}}function g(e){return/^data:/.test(e)||/^blob:/.test(e)}function v(e){return void 0===e}function w(e,t){var i=Math.pow;return Math.sqrt(i(e.x-t.x,2)+i(e.y-t.y,2))}var b=function e(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};s(this,e),this.nativeEvent=t,this.move=i,this.scale=n,this.params=o},y=function e(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};s(this,e),this.nativeEvent=t,this.directions=i,this.params=n},x=function e(t,i){s(this,e),this.nativeEvent=t,this.directions=i},S=function(){function e(t,i,n,o,r){s(this,e),this.nativeEvent=t,this.position=n,this.previousPosition=o,this.element=i,this.anchor=r}return function(e,t,i){t&&r(e.prototype,t),i&&r(e,i)}(e,[{key:"shift",value:function(){var e=this.element,t=this.anchor,i=this.position,n=e.getBoundingClientRect(),o=n.left,s=n.top;return{left:i.left-o-t.left,top:i.top-s-t.top}}}]),e}();var z=function(e,t,i,n,o,s,r,a,h,c){"boolean"!=typeof r&&(h=a,a=r,r=!1);var l,d="function"==typeof i?i.options:i;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),n&&(d._scopeId=n),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,h(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=l):t&&(l=r?function(){t.call(this,c(this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),l)if(d.functional){var u=d.render;d.render=function(e,t){return l.call(t),u(e,t)}}else{var m=d.beforeCreate;d.beforeCreate=m?[].concat(m,l):[l]}return i},C={name:"DraggableElement",mixins:[{beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.draggingAnchor=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(e){e.cancelable&&!this.disabled&&1===e.touches.length&&(this.touches=c(e.touches),!this.hovered&&this.$emit("enter"),e.touches.length&&this.initAnchor(this.touches.reduce(function(t,i){return{clientX:t.clientX+i.clientX/e.touches.length,clientY:t.clientY+i.clientY/e.touches.length}},{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){if(!this.disabled){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.preventDefault())},onMouseUp:function(){this.touches=[]},initAnchor:function(e){var t=this.$refs.draggable.getBoundingClientRect(),i=t.left,n=t.right,o=t.bottom,s=t.top;this.anchor={left:e.clientX-i,top:e.clientY-s,bottom:o-e.clientY,right:n-e.clientX}},processMove:function(e,t){var i=c(t);if(this.touches.length){if(1===this.touches.length&&1===i.length){var n=this.$refs.draggable;this.$emit("drag",new S(e,n,{left:i[0].clientX,top:i[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=i}},processEnd:function(){this.touches=[],this.hovered&&(this.$emit("leave"),this.hovered=!1)}}}],props:{classname:{type:String}}},T=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"draggable",class:e.classname,on:{touchstart:e.onTouchStart,mousedown:e.onMouseDown,mouseover:e.onMouseOver,mouseleave:e.onMouseLeave}},[e._t("default")],2)};T._withStripped=!0;var E=z({render:T,staticRenderFns:[]},void 0,C,void 0,!1,void 0,void 0,void 0),M=u("vue-handler-wrapper"),R={name:"HandlerWrapper",components:{DraggableElement:E},props:{horizontalPosition:{type:String},verticalPosition:{type:String},classname:{type:String},disabled:{type:Boolean,default:!1}},computed:{classnames:function(){var e;if(this.horizontalPosition||this.verticalPosition){var t,i=f(this.horizontalPosition,this.verticalPosition);e=d(this.classname,M((a(t={},i.classname,!0),a(t,"disabled",this.disabled),t)))}else e=d(this.classname,M({disabled:this.disabled}));return{default:e,draggable:M("draggable")}}}},W=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.classnames.default},[i("DraggableElement",{class:e.classnames.draggable,attrs:{disabled:e.disabled},on:{drag:function(t){return e.$emit("drag",t)},leave:function(){return e.$emit("leave")},enter:function(){return e.$emit("enter")}}},[e._t("default")],2)],1)};W._withStripped=!0;var _=z({render:W,staticRenderFns:[]},void 0,R,void 0,!1,void 0,void 0,void 0),H=u("vue-line-wrapper"),D={name:"LineWrapper",components:{DraggableElement:E},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var e;return H((a(e={},this.position,!0),a(e,"disabled",this.disabled),e))}}},A=function(){var e=this,t=e.$createElement;return(e._self._c||t)("DraggableElement",{class:e.classname,attrs:{disabled:e.disabled},on:{drag:function(t){return e.$emit("drag",t)},leave:function(){return e.$emit("leave")},enter:function(){return e.$emit("enter")}}},[e._t("default")],2)};A._withStripped=!0;var $=z({render:A,staticRenderFns:[]},void 0,D,void 0,!1,void 0,void 0,void 0),k=u("vue-bounding-box"),L=["east","west",null],O=["south","north",null],P={name:"BoundingBox",props:{classname:{type:String},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlerComponent:{type:[Object,String]},handlersClassnames:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},lineComponent:{type:[Object,String]},linesClassnames:{type:Object,default:function(){return{}}},scalable:{type:Boolean,default:!0}},data:function(){var e=[];return L.forEach(function(t){O.forEach(function(i){if(t!==i){var n=f(t,i),o=n.name,s=n.classname;e.push({name:o,classname:s,verticalDirection:i,horizontalDirection:t})}})}),{ghostCoordinates:{left:0,top:0,right:0,bottom:0},points:e}},computed:{ghostStyle:function(){return{right:"".concat(this.ghostCoordinates.right,"px"),bottom:"".concat(this.ghostCoordinates.bottom,"px"),top:"".concat(this.ghostCoordinates.top,"px"),left:"".concat(this.ghostCoordinates.left,"px")}},classnames:function(){var e=this.handlersClassnames,t=this.linesClassnames;return{default:d(k(),this.classname),handlers:e,lines:t}},lineNodes:function(){var e=this,t=[];return this.points.forEach(function(i){i.horizontalDirection&&i.verticalDirection||!e.lines[i.name]||t.push({name:i.name,component:e.lineComponent,classname:d(e.classnames.lines.default,e.classnames.lines[i.name],!e.scalable&&e.classnames.lines.disabled),hoverClassname:e.classnames.lines.hover,verticalDirection:i.verticalDirection,horizontalDirection:i.horizontalDirection,disabled:!e.scalable})}),t},handlerNodes:function(){var e=this,t=[];return this.points.forEach(function(i){e.handlers[i.name]&&t.push({name:i.name,component:e.handlerComponent,classname:d(e.classnames.handlers.default,e.classnames.handlers[i.name]),hoverClassname:e.classnames.handlers.hover,verticalDirection:i.verticalDirection,horizontalDirection:i.horizontalDirection,disabled:!e.scalable})}),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.draggingAnchor=[]},methods:{resize:function(e){this.scalable&&this.$emit("resize",e)},onHandlerDrag:function(e,t,i){var n,o=e.shift(),s=o.left,r=o.top,a={left:0,right:0,top:0,bottom:0};"west"===t?a.left-=s:"east"==t&&(a.right+=s),"north"===i?a.top-=r:"south"==i&&(a.bottom+=r),!i&&t?n="width":i&&!t&&(n="height"),this.ghostCoordinates={left:-a.left,right:-a.right,top:-a.top,bottom:-a.bottom},this.resize(new y(e.nativeEvent,a,{allowedDirections:{left:"west"===t||!t,right:"east"===t||!t,bottom:"south"===i||!i,top:"north"===i||!i},preventMove:!0,preserveAspectRatio:e.nativeEvent.shiftKey,respectDirection:n}))}}},B=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"box",class:e.classnames.default},[e._t("default"),e._v(" "),i("div",e._l(e.lineNodes,function(t){return i(t.component,{key:t.name,tag:"component",attrs:{classname:t.classname,"hover-classname":t.hoverClassname,position:t.name,disabled:t.disabled},on:{drag:function(i){return e.onHandlerDrag(i,t.horizontalDirection,t.verticalDirection)}}})}),1),e._v(" "),i("div",e._l(e.handlerNodes,function(t){return i(t.component,{key:t.name,tag:"component",attrs:{classname:t.classname,"hover-classname":t.hoverClassname,"horizontal-position":t.horizontalDirection,"vertical-position":t.verticalDirection,disabled:t.disabled},on:{drag:function(i){return e.onHandlerDrag(i,t.horizontalDirection,t.verticalDirection)}}})}),1),e._v(" "),i("div",{staticClass:"ghost",style:e.ghostStyle})],2)};B._withStripped=!0;var X=z({render:B,staticRenderFns:[]},void 0,P,void 0,!1,void 0,void 0,void 0),j=u("vue-draggable-area"),Y={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:5}},computed:{classnames:function(){return{default:d(j(),this.classname)}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(e){e.cancelable&&this.movable&&1===e.touches.length&&(this.touches=c(e.touches),e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(e){1<=this.touches.length&&(this.touchStarted?(this.processMove(e,e.touches),e.preventDefault(),e.stopPropagation()):w({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:e.touches[0].clientX,y:e.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(e){if(this.movable){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation())},onMouseUp:function(){this.touches=[]},initAnchor:function(e){var t=this.$refs.container.getBoundingClientRect(),i=t.left,n=t.top;this.anchor={x:e.clientX-i,y:e.clientY-n}},processMove:function(e,t){var i=c(t);if(this.touches.length){var n=this.$refs.container.getBoundingClientRect(),o=n.left,s=n.top;1===this.touches.length&&1===i.length&&this.$emit("move",new x(e,{left:i[0].clientX-o-this.anchor.x,top:i[0].clientY-s-this.anchor.y}))}},processEnd:function(){this.touches=[]}}},U=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"container",on:{touchstart:e.onTouchStart,mousedown:e.onMouseDown}},[e._t("default")],2)};U._withStripped=!0;var I=z({render:U,staticRenderFns:[]},void 0,Y,void 0,!1,void 0,void 0,void 0),N=["left","right"],F=["top","bottom"],q=["left","right","top","bottom"],G=4;function V(e){var t=e.rotate,i=e.scaleX,n=e.scaleY,o="";return(t||i||n)&&(t&&(o+=" rotate(".concat(t,"deg) ")),i&&(o+=" scaleX(".concat(i,") ")),n&&(o+=" scaleY(".concat(n,") "))),o}function J(e){return new Promise(function(t){(function(e){return new Promise(function(t,i){try{if(e)if(/^data:/i.test(e))t(function(e){e=e.replace(/^data:([^;]+);base64,/gim,"");for(var t=atob(e),i=t.length,n=new ArrayBuffer(i),o=new Uint8Array(n),s=0;s<i;s++)o[s]=t.charCodeAt(s);return n}(e));else if(/^blob:/i.test(e)){var n=new FileReader;n.onload=function(e){t(e.target.result)},function(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(){(200==this.status||0===this.status)&&t(this.response)},i.send()}(e,function(e){n.readAsArrayBuffer(e)})}else{var o=new XMLHttpRequest;o.onreadystatechange=function(){this.readyState!==G||(200===this.status||0===this.status?t(this.response):i("Warning: could not load an image to parse its orientation"),o=null)},o.onprogress=function(){"image/jpeg"!==o.getResponseHeader("content-type")&&o.abort()},o.withCredentials=!1,o.open("GET",e,!0),o.responseType="arraybuffer",o.send(null)}else i("Error: the image is empty")}catch(t){i(t)}})})(e).then(function(e){t(e?{arrayBuffer:e,orientation:Z(e)}:{arrayBuffer:null,orientation:null})}).catch(function(e){console.warn(e),t({arrayBuffer:null,orientation:null})})})}function Z(e){try{var t,i,n,o,s,r=new DataView(e);if(255===r.getUint8(0)&&216===r.getUint8(1))for(var a=r.byteLength,h=2;h+1<a;){if(255===r.getUint8(h)&&225===r.getUint8(h+1)){o=h;break}h++}if(o&&(i=o+10,"Exif"===function(e,t,i){var n,o="";for(n=t,i+=t;n<i;n++)o+=String.fromCharCode(e.getUint8(n));return o}(r,o+4,4))){var c=r.getUint16(i);if(((n=18761===c)||19789===c)&&42===r.getUint16(i+2,n)){var l=r.getUint32(i+4,n);8<=l&&(s=i+l)}}if(s)for(var d,u=r.getUint16(s,n),m=0;m<u;m++)if(d=s+12*m+2,274===r.getUint16(d,n)){d+=8,t=r.getUint16(d,n),r.setUint16(d,1,n);break}return t}catch(e){return null}}var K=u("vue-preview-result"),Q={name:"PreviewResult",props:{img:{type:Object},classname:{type:String},imageClassname:{type:String},resultCoordinates:{type:Object,default:function(){return{width:0,height:0,left:0,top:0}}},stencilCoordinates:{type:Object,default:function(){return{width:0,height:0,left:0,top:0}}}},computed:{classnames:function(){return{default:d(K(),this.classname),image:d(K("image"),this.imageClassname),wrapper:K("wrapper")}},mainStyle:function(){return{}},wrapperStyle:function(){return{width:"".concat(this.stencilCoordinates.width,"px"),height:"".concat(this.stencilCoordinates.height,"px"),left:"calc(50% - ".concat(this.stencilCoordinates.width/2,"px)"),top:"calc(50% - ".concat(this.stencilCoordinates.height/2,"px)")}},imageStyle:function(){var e=this.img.transforms,t=this.img.size.width,i=this.img.size.height,n=this.img.coefficient,o=i/n,s=t/n,r=e.flipped,a={width:"".concat(s,"px"),height:"".concat(o,"px")};return r?(a.width="".concat(o,"px"),a.height="".concat(s,"px"),a.left="".concat(-this.stencilCoordinates.left-(o-s)/2-e.translateX,"px"),a.top="".concat(-this.stencilCoordinates.top-(s-o)/2-e.translateY,"px")):(a.width="".concat(s,"px"),a.height="".concat(o,"px"),a.left="".concat(-this.stencilCoordinates.left+e.translateX,"px"),a.top="".concat(-this.stencilCoordinates.top+e.translateY,"px")),a.transform=V(e),a}}},ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.classnames.default,style:e.mainStyle},[i("div",{ref:"wrapper",class:e.classnames.wrapper,style:e.wrapperStyle},[i("img",{ref:"image",class:e.classnames.image,style:e.imageStyle,attrs:{src:e.img.src}})])])};ee._withStripped=!0;var te=z({render:ee,staticRenderFns:[]},void 0,Q,void 0,!1,void 0,void 0,void 0),ie={name:"CropperWrapper",props:{touchMove:{type:Boolean},mouseMove:{type:Boolean},touchResize:{type:Boolean},wheelResize:{type:Boolean},wheelZoomRatio:{type:Number,default:.1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.draggingAnchor=[]},methods:{onTouchStart:function(e){e.cancelable&&(this.touchMove||this.touchResize&&1<e.touches.length)&&(this.touches=c(e.touches),this.oldGeometricProperties=this.calculateGeometricProperties(this.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(e){0===e.touches.length&&this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){if(this.mouseMove&&"buttons"in e&&1===e.buttons){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault())},onMouseUp:function(){this.touches=[]},initAnchor:function(e){var t=this.$refs.container.getBoundingClientRect(),i=t.left,n=t.top;this.anchor={x:e.clientX-i,y:e.clientY-n}},calculateGeometricProperties:function(e){var t=this.$refs.container.getBoundingClientRect(),i=t.left,n=t.top,o=t.bottom,s=t.right,r=e.filter(function(e){return e.clientX>i&&e.clientX<s&&e.clientY>n&&e.clientY<o}),a={left:0,top:0},h=0;return r.forEach(function(e){a.left+=(e.clientX-i)/r.length,a.top+=(e.clientY-n)/r.length}),r.forEach(function(e){h+=w({x:a.left,y:a.top},{x:e.clientX-i,y:e.clientY-n})}),{centerMass:a,spread:h,count:r.length}},processMove:function(e,t){var i=c(t);if(this.touches.length){if(1===this.touches.length&&1===i.length&&this.touchMove)this.$emit("move",new b(e,{left:i[0].clientX-this.touches[0].clientX,top:i[0].clientY-this.touches[0].clientY}));else if(1<this.touches.length&&this.touchResize){var n=this.oldGeometricProperties,o=this.calculateGeometricProperties(i);n.count===o.count&&1<n.count&&this.$emit("resize",new b(e,{left:o.centerMass.left-n.centerMass.left,top:o.centerMass.top-n.centerMass.top},{factor:n.spread/o.spread,center:o.centerMass})),this.oldGeometricProperties=o}this.touches=i}},processEnd:function(){this.touches=[]},onWheel:function(e){if(this.wheelResize){var t=this.$refs.container.getBoundingClientRect(),i=t.left,n=t.top,o=1+this.wheelZoomRatio*Math.sign(e.deltaY||e.detail||e.wheelDelta),s={left:e.clientX-i,top:e.clientY-n};this.$emit("resize",new b(e,{},{factor:o,center:s})),e.preventDefault(),e.stopPropagation()}}}},ne=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"container",on:{touchstart:e.onTouchStart,mousedown:e.onMouseDown,wheel:e.onWheel}},[e._t("default")],2)};ne._withStripped=!0;var oe=z({render:ne,staticRenderFns:[]},void 0,ie,void 0,!1,void 0,void 0,void 0),se=u("vue-square-handler"),re={name:"SimpleHandler",components:{HandlerWrapper:_},props:{classname:{type:String},hoverClassname:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classnames:function(){return{default:d(se(a({},this.position,!0)),this.classname,this.hover&&this.hoverClassname)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1}}},ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("HandlerWrapper",{attrs:{"vertical-position":e.verticalPosition,"horizontal-position":e.horizontalPosition,disabled:e.disabled},on:{drag:e.onDrag}},[i("div",{class:e.classnames.default})])};ae._withStripped=!0;var he=z({render:ae,staticRenderFns:[]},void 0,re,void 0,!1,void 0,void 0,void 0),ce=u("vue-simple-line"),le={name:"SimpleLine",components:{LineWrapper:$},props:{classname:{type:String},hoverClassname:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classnames:function(){return{default:d(ce(a({},this.position,!0)),this.classname,this.hover&&this.hoverClassname)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1}}},de=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("LineWrapper",{attrs:{position:e.position,disabled:e.disabled},on:{enter:e.onEnter,leave:e.onLeave,drag:e.onDrag}},[i("div",{class:e.classnames.default})])};de._withStripped=!0;var ue=z({render:de,staticRenderFns:[]},void 0,le,void 0,!1,void 0,void 0,void 0),me=u("vue-rectangle-stencil"),pe={name:"RectangleStencil",components:{PreviewResult:te,BoundingBox:X,DraggableArea:I},props:{img:{type:Object},resultCoordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlerComponent:{type:[Object,String],default:function(){return he}},handlersClassnames:{type:Object,default:function(){return{}}},lines:{type:Object},lineComponent:{type:[Object,String],default:function(){return ue}},linesClassnames:{type:Object,default:function(){return{}}},classname:{type:String},previewClassname:{type:String},boundingBoxClassname:{type:String},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},scalable:{type:Boolean,default:!0}},computed:{classes:function(){return{stencil:d(me({movable:this.movable}),this.classname),preview:d(me("preview"),this.previewClassname),boundingBox:d(me("bounding-box"),this.boundingBoxClassname)}},style:function(){var e=this.stencilCoordinates,t=e.height,i=e.width,n=e.left,o=e.top;return{width:"".concat(i,"px"),height:"".concat(t,"px"),left:"".concat(n,"px"),top:"".concat(o,"px")}}},methods:{onMove:function(e){this.$emit("move",e)},onResize:function(e){this.$emit("resize",e)},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}}},fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.classes.stencil,style:e.style},[i("BoundingBox",{attrs:{classname:e.classes.boundingBox,handlers:e.handlers,"handler-component":e.handlerComponent,"handlers-classnames":e.handlersClassnames,lines:e.lines,"line-component":e.lineComponent,"lines-classnames":e.linesClassnames,scalable:e.scalable},on:{resize:e.onResize}},[i("DraggableArea",{attrs:{movable:e.movable},on:{move:e.onMove}},[i("PreviewResult",{attrs:{img:e.img,classname:e.classes.preview,"result-coordinates":e.resultCoordinates,"stencil-coordinates":e.stencilCoordinates}})],1)],1)],1)};fe._withStripped=!0;var ge=z({render:fe,staticRenderFns:[]},void 0,pe,void 0,!1,void 0,void 0,void 0),ve=u("vue-circle-stencil"),we={name:"CircleStencil",components:{PreviewResult:te,BoundingBox:X,DraggableArea:I},props:{img:{type:Object},stencilClass:{type:String},resultCoordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,westNorth:!0,westSouth:!0,eastSouth:!0}}},handlerComponent:{type:[Object,String],default:function(){return he}},handlersClassnames:{type:Object,default:function(){return{}}},lines:{type:Object},lineComponent:{type:[Object,String],default:function(){return ue}},linesClassnames:{type:Object,default:function(){return{}}},classname:{type:String},previewClassname:{type:String},boundingBoxClassname:{type:String}},computed:{classes:function(){return{stencil:d(ve(),this.classname),preview:d(ve("preview"),this.previewClassname),boundingBox:d(ve("bounding-box"),this.boundingBox)}},style:function(){var e=this.stencilCoordinates,t=e.height,i=e.width,n=e.left,o=e.top;return{width:"".concat(i,"px"),height:"".concat(t,"px"),left:"".concat(n,"px"),top:"".concat(o,"px")}}},methods:{onMove:function(e){this.$emit("move",e)},onResize:function(e){this.$emit("resize",e)},aspectRatios:function(){return{minimum:1,maximum:1}}}},be=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.classes.stencil,style:e.style},[i("BoundingBox",{attrs:{classname:e.classes.boundingBox,handlers:e.handlers,"handler-component":e.handlerComponent,"handlers-classnames":e.handlersClassnames,lines:e.lines,"line-component":e.lineComponent,"lines-classnames":e.linesClassnames},on:{resize:e.onResize}},[i("DraggableArea",{on:{move:e.onMove}},[i("PreviewResult",{attrs:{img:e.img,classname:e.classes.preview,"result-coordinates":e.resultCoordinates,"stencil-coordinates":e.stencilCoordinates}})],1)],1)],1)};be._withStripped=!0;var ye=z({render:be,staticRenderFns:[]},void 0,we,void 0,!1,void 0,void 0,void 0);function xe(e,t,i){return e.width+i*(t.left+t.right)}function Se(e,t,i){return e.height+i*(t.top+t.bottom)}function ze(e){var t=Math.min,i=e.directions,n=e.coordinates,o=e.restrictions,s=e.coefficient,r=e.preserveAspectRatio,a=e.stopOnBreak,l=e.mode,d=void 0===l?"crop":l,u=e.allowedArea,m=void 0===u?{}:u,p=h({},i),f=xe(n,p,s),g=Se(n,p,s);0>f&&(0>p.left&&0>p.right?(p.left=-(n.width-o.minWidth)/(p.left/p.right),p.right=-(n.width-o.minWidth)/(p.right/p.left)):0>p.left?p.left=-(n.width-o.minWidth)/s:0>p.right&&(p.right=-(n.width-o.minWidth)/s)),0>g&&(0>p.top&&0>p.bottom?(p.top=-(n.height-o.minHeight)/(p.top/p.bottom),p.bottom=-(n.height-o.minHeight)/(p.bottom/p.top)):0>p.top?p.top=-(n.height-o.minHeight):0>p.bottom&&(p.bottom=-(n.height-o.minHeight)));var v=Ce(n,p,m,s);"move"===d&&(0<v.left&&0===v.right?(p.right+=v.left,p.left-=v.left):0<v.right&&0===v.left&&(p.left+=v.right,p.right-=v.right),0<v.top&&0===v.bottom?(p.bottom+=v.top,p.top-=v.top):0<v.bottom&&0===v.top&&(p.top+=v.bottom,p.bottom-=v.bottom),v=Ce(n,p,m,s));var w={width:1/0,height:1/0};if(q.forEach(function(e){w[e]=v[e]&&p[e]?1-v[e]/(p[e]*s):1/0}),r){var b=t.apply(Math,c(q.map(function(e){return w[e]})));b!==1/0&&q.forEach(function(e){p[e]*=b})}else N.forEach(function(e){var i=a?t(w.top,w.bottom):w[e];i!==1/0&&(p[e]*=i)}),F.forEach(function(e){var i=a?t(w.top,w.bottom):w[e];i!==1/0&&(p[e]*=i)});if(f=xe(n,p,s),g=Se(n,p,s),p.right+p.left&&(f>o.maxWidth?w.width=(o.maxWidth-n.width)/(s*(p.right+p.left)):f<o.minWidth&&(w.width=(o.minWidth-n.width)/(s*(p.right+p.left)))),p.bottom+p.top&&(g>o.maxHeight?w.height=(o.maxHeight-n.height)/(s*(p.bottom+p.top)):g<o.minHeight&&(w.height=(o.minHeight-n.height)/(s*(p.bottom+p.top)))),r){var y=t(w.width,w.height);y!==1/0&&q.forEach(function(e){p[e]*=y})}else w.width!==1/0&&N.forEach(function(e){p[e]*=w.width}),w.height!==1/0&&F.forEach(function(e){p[e]*=w.height});return p}function Ce(e,t,i,n){var o=Math.min;return{left:"left"in i?-o(0,e.left-t.left*n-i.left):0,top:"top"in i?-o(0,e.top-t.top*n-i.top):0,bottom:"bottom"in i?-o(0,i.bottom-(e.bottom+t.bottom*n)):0,right:"right"in i?-o(0,i.right-(e.right+t.right*n)):0}}function Te(e,t,i,n,o){var s;return i.minimum&&e/t<i.minimum?s=i.minimum:i.maximum&&e/t>i.maximum?s=i.maximum:o&&(s=n.width/n.height),s}function Ee(e){var t=Math.max,i=e.coordinates,n=e.allowedArea,o=void 0===n?{}:n,s=e.coefficient,r=h({},e.moveEvent.directions),a={left:i.left+s*r.left,top:i.top+s*r.top,width:i.width,height:i.height};return"left"in o&&a.left<o.left&&(a.left=o.left),"right"in o&&a.left+a.width>o.right&&(a.left=t(0,o.right-a.width)),"top"in o&&a.top<o.top&&(a.top=o.top),"bottom"in o&&a.top+a.height>o.bottom&&(a.top=t(0,o.bottom-a.height)),a}var Me=u("vue-advanced-cropper");function Re(e,t,i){function n(n){return console.warn("The arguments will be passed to the prop '".concat(t,"' as an single object {").concat(Object.keys(n).join(","),"} in the future releases. You should change the interface of your function.")),e.apply(void 0,c(i(n)))}return function(t){if(1<e.length)return n(t);try{return e(t)}catch(e){return n(t)}}}var We={name:"Cropper",components:{CropperWrapper:oe},props:{src:{type:String,default:null},resizeAlgorithm:{type:Function,default:function(e){var t=Math.abs,i=e.coordinates,n=e.restrictions,o=e.allowedArea,s=e.coefficient,r=e.aspectRatio,a=e.resizeEvent,c=e.complete,l=h({},i,{right:i.left+i.width,bottom:i.top+i.height}),d=a.params||{},u=h({},a.directions),m=d.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};q.forEach(function(e){m[e]||(u[e]=0)});var p=xe(l,u=ze({directions:u,restrictions:n,coordinates:l,allowedArea:o,coefficient:s,stopOnBreak:d.stopOnBreak}),s),f=Se(l,u,s),g=Te(p,f,r,l,d.preserveAspectRatio);if(g&&(void 0===c||c)){var v=d.respectDirection;if(v||(v=l.width>=l.height||1==g?"width":"height"),"width"===v){var w=p/g-l.height;m.top&&m.bottom?(u.bottom=w/(2*s),u.top=w/(2*s)):m.bottom?u.bottom=w/s:m.top?u.top=w/s:m.right?u.right=0:m.left&&(u.left=0)}else if("height"===v){var b=l.width-f*g;m.left&&m.right?(u.left=-b/(2*s),u.right=-b/(2*s)):m.left?u.left=-b/s:m.right?u.right=-b/s:m.top?u.top=0:m.bottom&&(u.bottom=0)}u=ze({directions:u,restrictions:n,coordinates:l,allowedArea:o,coefficient:s,preserveAspectRatio:!0,mode:d.compensate&&!d.stopOnBreak?"move":"crop"})}return.001<t((g=Te(p=xe(l,u,s),f=Se(l,u,s),r,l,d.preserveAspectRatio))-p/f)&&(console.error("Someting went wrong and ratio was broken: ".concat(p/f," instead of ").concat(g)),q.forEach(function(e){m[e]||(u[e]=0)})),Ee({coordinates:{width:i.width+s*(u.right+u.left),height:i.height+s*(u.top+u.bottom),left:i.left,top:i.top},allowedArea:o,coefficient:s,moveEvent:new x({},{left:-u.left,top:-u.top})})}},moveAlgorithm:{type:Function,default:Ee},defaultSize:{type:Function,default:function(e){var t=Math.max,i=Math.min,n=(e.cropper,e.image,e.minWidth),o=e.minHeight,s=e.maxWidth,r=e.maxHeight,a=e.imageWidth,h=e.imageHeight,c=e.aspectRatio,l=(e.props,a),d=h,u=a>h?c.maximum:c.minimum;return(a/h>c.maximum||a/h<c.minimum)&&(1>=u?l=(d=h)*c.maximum:d=(l=a)/c.minimum),{height:i(r,t(o,.8*d)),width:i(s,t(n,.8*l))}}},defaultPosition:{type:Function,default:function(e){e.cropper,e.image;var t=e.stencilWidth,i=e.stencilHeight,n=e.imageWidth,o=e.imageHeight;return e.props,{left:n/2-t/2,top:o/2-i/2}}},areaSize:{type:Function,default:function(e){var t=e.cropper,i=(e.image,e.imageWidth),n=e.imageHeight,o=t.clientHeight,s=t.clientWidth,r=o,a=i*o/n;return a>s&&(a=s,r=n*s/i),{width:a,height:r}}},restrictions:{type:Function,default:function(e){var t=e.minWidth,i=e.minHeight,n=e.maxWidth,o=e.maxHeight,s=e.imageWidth,r=e.imageHeight;return{minWidth:t/100*s,minHeight:i/100*r,maxWidth:n?n/100*s:s,maxHeight:o?o/100*r:r}}},minWidth:{type:[Number,String],default:10},minHeight:{type:[Number,String],default:10},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},stencilComponent:{type:[Object,String],default:function(){return ge}},stencilProps:{type:Object,default:function(){return{}}},classname:{type:String},imageClassname:{type:String},areaClassname:{type:String},backgroundClassname:{type:String},debounce:{type:Number,default:500},canvas:{type:Boolean,default:!0},checkCrossOrigin:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},transitionTime:{type:Number,default:300},wheelResize:{type:Boolean,default:!0},touchResize:{type:Boolean,default:!0},touchMove:{type:Boolean,default:!0},mouseMove:{type:Boolean,default:!0}},data:function(){return{boundarySize:{width:null,height:null},imageLoaded:!1,imageAttributes:{crossOrigin:!1,src:null},basicImageTransforms:{rotate:null,scaleX:null,scaleY:null},imageSize:{width:null,height:null},coordinates:{left:0,top:0,width:0,height:0},stencilCoordinates:{left:0,top:0,width:0,height:0},frozenDirections:{width:!1,height:!1},worldTransforms:{scale:1,shift:{left:0,top:0}}}},computed:{imageTransforms:function(){return h({},this.basicImageTransforms,{scaleX:(this.basicImageTransforms.scaleX||1)*this.worldTransforms.scale,scaleY:(this.basicImageTransforms.scaleY||1)*this.worldTransforms.scale,translateX:this.worldTransforms.shift.left+(this.imageSize.width*this.worldTransforms.scale-this.imageSize.width)/2/this.coefficient,translateY:this.worldTransforms.shift.top+(this.imageSize.height*this.worldTransforms.scale-this.imageSize.height)/2/this.coefficient})},coefficient:function(){return this.imageSize.width?this.imageSize.width/this.boundarySize.width:0},classes:function(){return{cropper:d(Me(),this.classname),image:d(Me("image"),this.imageClassname),area:d(Me("area"),this.areaClassname),stretcher:d(Me("stretcher")),background:d(Me("background"),this.backgroundClassname),imageWrapper:d(Me("image-wrapper")),cropperWrapper:d(Me("cropper-wrapper"))}},wrapperStyle:function(){return{width:"".concat(this.stencilCoordinates.width,"px"),height:"".concat(this.stencilCoordinates.height,"px"),left:"".concat(this.stencilCoordinates.left,"px"),top:"".concat(this.stencilCoordinates.top,"px")}},areaStyle:function(){return{width:this.boundarySize.width?"".concat(this.boundarySize.width,"px"):"auto",height:this.boundarySize.height?"".concat(this.boundarySize.height,"px"):"auto",opacity:this.imageLoaded?1:0,transition:"opacity ".concat(this.transitionTime,"ms")}},imageStyle:function(){var e={left:"calc(50% + ".concat(this.imageTransforms.translateX,"px)"),top:"calc(50% + ".concat(this.imageTransforms.translateY,"px)"),transform:"translate(-50%, -50%)"+V(this.imageTransforms)};return this.imageTransforms.flipped?(e.width="".concat(this.boundarySize.height,"px"),e.height="".concat(this.boundarySize.width,"px")):(e.width="".concat(this.boundarySize.width,"px"),e.height="".concat(this.boundarySize.height,"px")),e},stencilRestrictions:function(){var e=Re(this.restrictions,"restrictions",function(e){return[e.minWidth,e.minHeight,e.maxWidth,e.maxHeight,e.imageWidth,e.imageHeight]})({minWidth:+this.minWidth,minHeight:+this.minHeight,maxWidth:+this.maxWidth,maxHeight:+this.maxHeight,imageWidth:this.imageSize.width,imageHeight:this.imageSize.height,props:this.$props});return this.minWidth>this.imageSize.width&&(console.warn("Warning: minimum width (".concat(e.minWidth,"px) greater that the image width (").concat(this.imageSize.width,"px). It is set equal to the image width and width resizing was blocked")),e.minWidth=this.imageSize.width,e.widthFrozen=!0),this.minHeight>this.imageSize.height&&(console.warn("Warning: minimum height (".concat(e.minHeight,"px) greater that the image height (").concat(this.imageSize.height,"px). It is set equal to the image height and height resizing was blocked")),e.minHeight=this.imageSize.height,e.heightFrozen=!0),e.minWidth>e.maxWidth&&(console.warn("Warning: maximum width (".concat(e.maxWidth,"px) fewer that the minimum width (").concat(e.minWidth,"px). It is set equal to the minimum width and width resizing was blocked")),e.maxWidth=e.minWidth,e.widthFrozen=!0),e.minHeight>e.maxHeight&&(console.warn("Warning: maximum height (".concat(e.maxHeight,"px) fewer that the minimum height (").concat(e.minHeight,"px). It is set equal to the minimum height and height resizing was blocked")),e.maxHeight=e.minHeight,e.heightFrozen=!0),(!e.maxWidth||e.maxWidth>this.imageSize.width)&&(e.maxWidth=this.imageSize.width),(!e.maxHeight||e.maxHeight>this.imageSize.height)&&(e.maxHeight=this.imageSize.height),e}},watch:{src:function(){this.onChangeImage()},minWidth:function(){this.resetCoordinates()},maxWidth:function(){this.resetCoordinates()},minHeight:function(){this.resetCoordinates()},maxHeight:function(){this.resetCoordinates()}},mounted:function(){var e=this;this.debouncedUpdate=p(this.update,this.debounce),window.addEventListener("resize",this.onResizeWindow),window.addEventListener("orientationchange",this.onResizeWindow),this.$refs.image.addEventListener("load",function(){e.$refs.image&&e.refreshImage().then(e.resetCoordinates)}),this.onChangeImage()},destroyed:function(){window.removeEventListener("resize",this.refreshImage),window.removeEventListener("orientationchange",this.refreshImage)},methods:{getResult:function(){return this.canvas&&this.src?(this.updateCanvas(this.coordinates),{coordinates:h({},this.coordinates),canvas:this.$refs.canvas}):{coordinates:h({},this.coordinates)}},getArea:function(){return this.$refs.area},getStencil:function(){return this.$refs.stencil},updateStencilCoordinates:function(e){var t=e.width,i=e.height,n=e.left,o=e.top,s={width:this.worldTransforms.scale*t/this.coefficient,height:this.worldTransforms.scale*i/this.coefficient,left:n/this.coefficient*this.worldTransforms.scale+this.worldTransforms.shift.left,top:o/this.coefficient*this.worldTransforms.scale+this.worldTransforms.shift.top};this.stencilCoordinates=function(e,t){var i=Math.round,n=h({},t);return n.width=i(t.width),n.height=i(t.height),n.left-=n.width-t.width,n.top-=n.height-t.height,t}(this.stencilCoordinates,s)},updateWorldCoordinates:function(e){this.worldTransforms.scale=this.stencilCoordinates.width*this.coefficient/e.width,this.worldTransforms.shift.left=this.stencilCoordinates.left-e.left/this.coefficient*this.worldTransforms.scale,this.worldTransforms.shift.top=this.stencilCoordinates.top-e.top/this.coefficient*this.worldTransforms.scale},updateCanvas:function(e){if(this.$refs.canvas){var t=this.$refs.image,i=this.checkOrientation?function(e,t,i){var n=Math.PI,o=i.flipped,s=i.orientation,r=t.naturalWidth,a=t.naturalHeight,h=e.getContext("2d");return e.width=r,e.height=a,h.save(),o&&(e.width=a,e.height=r),2==s?(h.translate(r,0),h.scale(-1,1)):3==s?(h.translate(r,a),h.rotate(1*n)):4==s?(h.translate(0,a),h.scale(1,-1)):5==s?(h.rotate(.5*n),h.scale(1,-1)):6==s?(h.rotate(.5*n),h.translate(0,-a)):7==s?(h.rotate(1.5*n),h.translate(-r,a),h.scale(1,-1)):8==s&&(h.translate(0,r),h.rotate(1.5*n)),h.drawImage(t,0,0,r,a),h.restore(),e}(this.$refs.sourceCanvas,t,this.imageTransforms):t,n=this.$refs.canvas;n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(i,e.left,e.top,e.width,e.height,0,0,e.width,e.height)}},update:function(){this.$emit("change",this.getResult())},onResizeWindow:function(){var e=this,t=this.$refs.image;this.src&&t&&this.refreshImage().then(function(){return e.updateStencilCoordinates(e.coordinates)})},onChangeCoordinates:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.coordinates=e,this.$listeners&&this.$listeners.change&&(t?this.debouncedUpdate():this.update())},onChangeImage:function(){var e=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){var t=function(e){if(g(e))return!1;var t=window.location,i=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(e)||[],n={protocol:i[1]||"",host:i[2]||"",port:i[3]||""},o=function(e){return e.port||function(e){return{"http:":80,"https:":443}[e]}(e.protocol||t.protocol)};return(n.protocol||n.host||n.port)&&!(n.protocol&&n.protocol==t.protocol&&n.host&&n.host==t.host&&n.host&&o(n)==o(t))}(this.src);t&&this.canvas&&this.checkCrossOrigin&&(this.imageAttributes.crossOrigin="anonymous"),setTimeout(function(){e.checkOrientation?J(t?function(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}(e.src):e.src).then(e.onParseImage):e.onParseImage({})},this.transitionTime)}else this.clearImage()},onParseImage:function(e){var t=this,i=e.arrayBuffer,n=e.orientation;this.imageAttributes.src=i&&n&&g(this.src)?function(e){for(var t=[],i=new Uint8Array(e);0<i.length;){var n=i.subarray(0,8192);t.push(String.fromCharCode.apply(null,Array.from?Array.from(n):Array.slice(n))),i=i.subarray(8192)}return"data:image/jpeg;base64,".concat(btoa(t.join("")))}(i):this.src,this.basicImageTransforms=function(e){var t={orientation:e};return e&&(2===e?t.scaleX=-1:3===e?t.rotate=-180:4===e?t.scaleY=-1:5===e?(t.rotate=90,t.scaleY=-1):6===e?t.rotate=90:7===e?(t.rotate=90,t.scaleX=-1):8===e&&(t.rotate=-90)),(90===t.rotate||-90===t.rotate)&&(t.flipped=!0),t}(n),o.a.nextTick(function(){var e=t.$refs.image;e&&e.complete&&t.refreshImage().then(t.resetCoordinates)})},onResize:function(e){this.frozenDirections.width&&(e.directions.left=0,e.directions.right=0),this.frozenDirections.height&&(e.directions.top=0,e.directions.bottom=0),e.directions.top/=this.worldTransforms.scale,e.directions.left/=this.worldTransforms.scale,e.directions.right/=this.worldTransforms.scale,e.directions.bottom/=this.worldTransforms.scale,this.onChangeCoordinates(this.resizeAlgorithm({coordinates:this.coordinates,restrictions:this.stencilRestrictions,allowedArea:this.allowedArea(),coefficient:this.coefficient,aspectRatio:this.stencilAspectRatios(),resizeEvent:e})),this.updateStencilCoordinates(this.coordinates)},onManipulateImage:function(e){var t=Math.ceil,i=Math.abs,n=Math.min,o=e.scale,s=e.move,r={width:this.imageSize.width*this.worldTransforms.scale/this.coefficient,height:this.imageSize.height*this.worldTransforms.scale/this.coefficient},a={left:s.left||0,top:s.top||0},h=1,c=1;if(!this.frozenDirections.width&&!this.frozenDirections.height&&.001<i(o.factor-1)){var l=i(1-h)/2,d=this.stencilRestrictions,u=d.maxWidth,m=d.maxHeight,p=d.minWidth,f=d.minHeight;h=o.factor,this.worldTransforms.scale/h<1+l&&(h=this.worldTransforms.scale);var g=this.coordinates.width*h,v=this.coordinates.height*h,w={minWidth:g<p+l,minHeight:v<f+l,maxWidth:g>u-l,maxHeight:v>m-l};if(w.minWidth&&(h=p/this.coordinates.width),w.minHeight&&(h=f/this.coordinates.height),w.maxHeight||w.maxWidth){var b=h;w.maxWidth&&w.maxHeight?b=n(m/this.coordinates.height,this.coordinates.width):w.maxHeight?b=m/this.coordinates.height:w.maxWidth&&(b=u/this.coordinates.width),c=b/h}var y={width:r.width*(1-1/h),height:r.height*(1-1/h)};a.left+=y.width*i((this.worldTransforms.shift.left-o.center.left)/r.width),a.top+=y.height*i((this.worldTransforms.shift.top-o.center.top)/r.height),r.width/=h,r.height/=h}0<t(this.worldTransforms.shift.left+a.left)?a.left=-this.worldTransforms.shift.left:this.worldTransforms.shift.left+a.left<this.boundarySize.width-r.width&&(a.left=this.boundarySize.width-r.width-this.worldTransforms.shift.left),0<t(this.worldTransforms.shift.top+a.top)?a.top=-this.worldTransforms.shift.top:this.worldTransforms.shift.top+a.top<this.boundarySize.height-r.height&&(a.top=this.boundarySize.height-r.height-this.worldTransforms.shift.top),this.worldTransforms.shift.left+=a.left,this.worldTransforms.shift.top+=a.top,this.worldTransforms.scale/=h;var x={left:0,top:0};this.imageSize.width!==this.coordinates.width&&(x.left=this.stencilCoordinates.width*(1-c)*(this.coordinates.left/(this.imageSize.width-this.coordinates.width))),this.imageSize.height!==this.coordinates.height&&(x.top=this.stencilCoordinates.height*(1-c)*(this.coordinates.top/(this.imageSize.height-this.coordinates.height)));var S={width:this.coordinates.width*h*c,height:this.coordinates.height*h*c,left:(this.stencilCoordinates.left-this.worldTransforms.shift.left+x.left)*this.coefficient/this.worldTransforms.scale,top:(this.stencilCoordinates.top-this.worldTransforms.shift.top+x.top)*this.coefficient/this.worldTransforms.scale};this.onChangeCoordinates(S),this.updateStencilCoordinates(S)},onMove:function(e){var t=this;q.forEach(function(i){e.directions[i]/=t.worldTransforms.scale}),this.onChangeCoordinates(this.moveAlgorithm({coordinates:this.coordinates,allowedArea:this.allowedArea(),coefficient:this.coefficient,moveEvent:e})),this.updateStencilCoordinates(this.coordinates)},defaultCoordinates:function(){var e=Math.max,t=Math.min,i=this.stencilAspectRatios(),n=this.stencilRestrictions,o=n.minWidth,s=n.minHeight,r=n.maxWidth,a=n.maxHeight,h=this.imageSize,c={};if(i.minimum||i.maximum){var l={width:{maximum:i.minimum?t(a,o/i.minimum):a,minimum:i.maximum?e(s,o/i.maximum):s},height:{maximum:i.maximum?t(r,s*i.maximum):r,minimum:i.mininum?e(o,s*i.mininum):o}};if(l.width.maximum>=l.width.minimum)c.width=o,c.height=l.width.minimum;else{if(!(l.height.maximum>=l.height.minimum))throw"Error: current aspect ratio is incompatible with minimum/maximum height and width settings. Can't setup default coordinates";c.height=s,c.width=l.height.minimum}}else c.height=s,c.width=o;return c.left=h.width/2-c.width/2,c.top=h.height/2-c.height/2,c},setCoordinates:function(e){var t=this;o.a.nextTick(function(){return t.imageLoaded?void t.applyTransforms(e):void(t.delayedTransforms=e)})},applyTransforms:function(e){var t=this,i=this.coefficient,n=this.stencilAspectRatios(),o=function(e,n){return t.moveAlgorithm({coordinates:e,allowedArea:t.allowedArea(),coefficient:i,moveEvent:new x(null,{left:(n.left-e.left)/i,top:(n.top-e.top)/i})})},s=function(e,s){var r=t.defaultCoordinates();return r=t.resizeAlgorithm({coordinates:r,restrictions:t.stencilRestrictions,allowedArea:t.allowedArea(),coefficient:i,aspectRatio:n,resizeEvent:new y(null,{left:(s.width-r.width)/(2*i),right:(s.width-r.width)/(2*i),top:(s.height-r.height)/(2*i),bottom:(s.height-r.height)/(2*i)})}),o(r,{left:e.left,top:e.top})},r=this.coordinates;return e.forEach||(e=[e]),e.forEach(function(e){var i;v((i="function"==typeof e?e(h({},r),t.imageSize):e).width)&&v(i.height)||(r=s(r,h({},r,i))),v(i.left)&&v(i.top)||(r=o(r,h({},r,i)))}),this.onChangeCoordinates(r,!1),this.updateStencilCoordinates(r),r},resetCoordinates:function(){var e=this;if(this.$refs.image){var t=this.$refs.cropper,i=this.$refs.image,n=this.stencilRestrictions,o=n.minWidth,s=n.minHeight,r=n.maxWidth,a=n.maxHeight,l=n.widthFrozen,d=n.heightFrozen;this.frozenDirections.width=!!l,this.frozenDirections.height=!!d;var u=Re(this.defaultSize,"defaultSize",function(e){return[e.cropper,e.image,{minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight},e.imageWidth,e.imageHeight,e.props]})(h({cropper:t,image:i,imageWidth:this.imageSize.width,imageHeight:this.imageSize.height,props:this.$props,aspectRatio:this.stencilAspectRatios()},this.stencilRestrictions));(u.width<o||u.height<s||u.width>r||u.height>a)&&console.warn("Warning: default size breaking size restrictions. Check your defaultSize function",u,this.stencilRestrictions);var m=[u,function(n){return h({},Re(e.defaultPosition,"defaultPosition",function(e){return[e.cropper,e.image,e.stencilWidth,e.stencilHeight,e.imageWidth,e.imageHeight,e.props]})({cropper:t,image:i,stencilWidth:n.width,stencilHeight:n.height,imageWidth:e.imageSize.width,imageHeight:e.imageSize.height,props:e.$props}))}];this.delayedTransforms&&m.push.apply(m,c(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.worldTransforms={scale:1,shift:{left:0,top:0}},this.applyTransforms(m),this.delayedTransforms=null,this.imageLoaded=!0}},clearImage:function(){var e=this.$refs.stretcher;this.imageLoaded=!1,this.onChangeCoordinates({left:0,top:0,width:0,height:0},!1),setTimeout(function(){e.style.height="auto",e.style.width="auto"},this.transitionTime)},refreshImage:function(){var e=this;return new Promise(function(t,i){var n=e.$refs.image,s=e.$refs.cropper;if(e.src&&n){var r=e.$refs.stretcher;e.imageTransforms.flipped?(e.imageSize.height=n.naturalWidth,e.imageSize.width=n.naturalHeight):(e.imageSize.height=n.naturalHeight,e.imageSize.width=n.naturalWidth);var a=e.imageSize.width/e.imageSize.height;e.imageSize.height>e.imageSize.width?(r.style.height="".concat(e.imageSize.height,"px"),r.style.width="".concat(r.clientHeight*a,"px"),r.clientWidth/r.clientHeight!=a&&(r.style.height="".concat(r.clientWidth/a,"px"))):(r.style.width="".concat(e.imageSize.width,"px"),r.style.height="".concat(r.clientWidth/a,"px"),r.clientHeight/r.clientWidth!=a&&(r.style.width="".concat(r.clientHeight*a,"px"))),o.a.nextTick(function(){var i=Re(e.areaSize,"areaSize",function(e){return[e.cropper,e.image,e.imageWidth,e.imageHeight]})({cropper:s,image:n,imageWidth:e.imageSize.width,imageHeight:e.imageSize.height}),o=i.height,r=i.width;o&&(e.boundarySize.height=o),r&&(e.boundarySize.width=r),t()})}else i()})},allowedArea:function(){return{left:-this.worldTransforms.shift.left/this.worldTransforms.scale*this.coefficient,top:-this.worldTransforms.shift.top/this.worldTransforms.scale*this.coefficient,right:(this.boundarySize.width-this.worldTransforms.shift.left)/this.worldTransforms.scale*this.coefficient,bottom:(this.boundarySize.height-this.worldTransforms.shift.top)/this.worldTransforms.scale*this.coefficient}},stencilAspectRatios:function(){return this.$refs.stencil.aspectRatios?this.$refs.stencil.aspectRatios():{minimum:this.stencilProps.aspectRatio||this.stencilProps.minAspectRatio,maximum:this.stencilProps.aspectRatio||this.stencilProps.maxAspectRatio}}}},_e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"cropper",class:e.classes.cropper},[i("div",{class:e.classes.background,style:e.areaStyle}),e._v(" "),i("div",{ref:"stretcher",class:e.classes.stretcher}),e._v(" "),i("div",{ref:"area",class:e.classes.area,style:e.areaStyle},[i("CropperWrapper",{class:e.classes.cropperWrapper,attrs:{"wheel-resize":e.wheelResize,"touch-resize":e.touchResize,"touch-move":e.touchMove&&1<e.worldTransforms.scale,"mouse-move":e.touchMove&&1<e.worldTransforms.scale},on:{move:e.onManipulateImage,resize:e.onManipulateImage}},[i("div",{class:e.classes.imageWrapper},[i("img",{ref:"image",class:e.classes.image,style:e.imageStyle,attrs:{crossOrigin:e.imageAttributes.crossOrigin,src:e.imageAttributes.src},on:{mousedown:function(e){e.preventDefault()}}})]),e._v(" "),i(e.stencilComponent,e._b({ref:"stencil",tag:"component",attrs:{img:{src:e.imageAttributes.src,size:e.imageSize,transforms:e.imageTransforms,coefficient:e.coefficient},"result-coordinates":e.coordinates,"stencil-coordinates":e.stencilCoordinates},on:{resize:e.onResize,move:e.onMove}},"component",e.stencilProps,!1)),e._v(" "),e.canvas?i("canvas",{ref:"canvas",style:{display:"none"}}):e._e(),e._v(" "),e.canvas?i("canvas",{ref:"sourceCanvas",style:{display:"none"}}):e._e()],1)],1)])};_e._withStripped=!0;var He=z({render:_e,staticRenderFns:[]},void 0,We,void 0,!1,void 0,void 0,void 0),De=u("vue-preview-image"),Ae={name:"PreviewImage",props:{img:{type:String},classname:{type:String},imageClassname:{type:String},width:{type:Number},height:{type:Number},top:{type:Number},left:{type:Number},previewWidth:{type:Number,required:!0},previewHeight:{type:Number,required:!0}},data:function(){return{imageSize:{width:0,height:0}}},computed:{classnames:function(){return{default:d(De(),this.classname),image:d(De("image"),this.imageClassname)}},wrapperStyle:function(){return{width:"".concat(this.previewWidth,"px"),height:"".concat(this.previewHeight,"px")}},imageStyle:function(){var e=this.previewHeight/this.height,t=this.imageSize.height*e,i=this.imageSize.width*e;return{width:"".concat(i,"px"),height:"".concat(t,"px"),left:"".concat(-this.left*e,"px"),top:"".concat(-this.top*e,"px")}}},watch:{img:function(){this.onChangeImage()}},mounted:function(){this.onChangeImage()},methods:{refreshImage:function(){var e=this.$refs.image;this.imageSize.height=e.naturalHeight,this.imageSize.width=e.naturalWidth},onChangeImage:function(){var e=this,t=this.$refs.image;t.complete?this.refreshImage():t.addEventListener("load",function(){e.refreshImage()})}}},$e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.classnames.default,style:e.wrapperStyle},[i("img",{ref:"image",class:e.classnames.image,style:e.imageStyle,attrs:{src:e.img}})])};$e._withStripped=!0;z({render:$e,staticRenderFns:[]},void 0,Ae,void 0,!1,void 0,void 0,void 0);o.a.component("cropper",He),o.a.component("rectangle-stencil",ge),o.a.component("circle-stencil",ye),o.a.component("simple-handler",he),o.a.component("simple-line",ue),function(e,t){if(t&&"undefined"!=typeof document){for(var i,n=document.head||document.getElementsByTagName("head")[0],o=n.getElementsByTagName("style"),s=0;s<o.length;s++)o[s]&&o[s].innerText&&o[s].innerText.startsWith("/*for="+e)&&(i=o[s]);if(i||((i=document.createElement("style")).type="text/css",n.insertBefore(i,o[0]||n.firstChild)),i.styleSheet)i.styleSheet.cssText=t;else{var r=document.createTextNode("/*for="+e+"*/"+t);i.innerHTML="",i.appendChild(r)}}}("vue-advanced-cropper",".vue-advanced-cropper {  text-align: center;  position: relative;  -webkit-user-select: none;     -moz-user-select: none;      -ms-user-select: none;          user-select: none;  max-height: 100%;  max-width: 100%;}.vue-advanced-cropper__stretcher {  pointer-events: none;  position: relative;  max-width: 100%;  max-height: 100%;}.vue-advanced-cropper__image {  opacity: 0.5;  -webkit-user-select: none;     -moz-user-select: none;      -ms-user-select: none;          user-select: none;  position: absolute;  -webkit-transform-origin: center;          transform-origin: center;  max-width: unset !important;}.vue-advanced-cropper__area {  position: absolute;  left: 50%;  -webkit-transform: translate(-50%, -50%);          transform: translate(-50%, -50%);  top: 50%;}.vue-advanced-cropper__background {  position: absolute;  background: black;  top: 50%;  left: 50%;  -webkit-transform: translate(-50%, -50%);          transform: translate(-50%, -50%);}.vue-advanced-cropper__cropper-wrapper {  width: 100%;  height: 100%;}.vue-advanced-cropper__image-wrapper {  overflow: hidden;  position: absolute;  width: 100%;  height: 100%;}.vue-advanced-cropper__stencil-wrapper {  position: absolute;}/*# sourceMappingURL=Cropper.vue.map */.vue-circle-stencil {  position: absolute;  height: 100%;  width: 100%;  -webkit-box-sizing: content-box;          box-sizing: content-box;  cursor: move;}.vue-circle-stencil__preview {  border-radius: 50%;}/*# sourceMappingURL=CircleStencil.vue.map */.vue-rectangle-stencil {  position: absolute;  height: 100%;  width: 100%;  -webkit-box-sizing: border-box;          box-sizing: border-box;}.vue-rectangle-stencil--movable {  cursor: move;}/*# sourceMappingURL=RectangleStencil.vue.map */.vue-simple-line {  background: none;  -webkit-transition: border 0.5s;  transition: border 0.5s;  border-color: rgba(255, 255, 255, 0.3);  border-width: 0;  border-style: solid;}.vue-simple-line--south, .vue-simple-line--north {  height: 0;  width: 100%;}.vue-simple-line--east, .vue-simple-line--west {  height: 100%;  width: 0;}.vue-simple-line--east {  border-right-width: 1px;}.vue-simple-line--west {  border-left-width: 1px;}.vue-simple-line--south {  border-top-width: 1px;}.vue-simple-line--north {  border-bottom-width: 1px;}.vue-simple-line--hover {  opacity: 1;  border-color: white;}/*# sourceMappingURL=SimpleLine.vue.map */.vue-square-handler {  display: block;  background: white;  height: 10px;  width: 10px;}/*# sourceMappingURL=SimpleHandler.vue.map */.vue-line-wrapper {  background: none;  position: absolute;  display: -webkit-box;  display: -ms-flexbox;  display: flex;  -webkit-box-align: center;      -ms-flex-align: center;          align-items: center;  -webkit-box-pack: center;      -ms-flex-pack: center;          justify-content: center;}.vue-line-wrapper--north, .vue-line-wrapper--south {  height: 12px;  width: 100%;  left: 0;  -webkit-transform: translateY(-50%);          transform: translateY(-50%);}.vue-line-wrapper--north {  top: 0;  cursor: n-resize;}.vue-line-wrapper--south {  top: 100%;  cursor: s-resize;}.vue-line-wrapper--east, .vue-line-wrapper--west {  width: 12px;  height: 100%;  -webkit-transform: translateX(-50%);          transform: translateX(-50%);  top: 0;}.vue-line-wrapper--east {  left: 100%;  cursor: e-resize;}.vue-line-wrapper--west {  left: 0;  cursor: w-resize;}.vue-line-wrapper--disabled {  cursor: auto;}/*# sourceMappingURL=LineWrapper.vue.map */.vue-preview-result {  overflow: hidden;  -webkit-box-sizing: border-box;          box-sizing: border-box;  position: absolute;  height: 100%;  width: 100%;}.vue-preview-result__wrapper {  position: absolute;}.vue-preview-result__image {  pointer-events: none;  position: absolute;  -webkit-user-select: none;     -moz-user-select: none;      -ms-user-select: none;          user-select: none;  -webkit-transform-origin: center;          transform-origin: center;  max-width: unset !important;}/*# sourceMappingURL=PreviewResult.vue.map */.vue-draggable-area {  position: relative;}/*# sourceMappingURL=DraggableArea.vue.map */.vue-preview-image {  overflow: hidden;  position: relative;}.vue-preview-image__image {  pointer-events: none;  position: absolute;  max-width: unset !important;}/*# sourceMappingURL=PreviewImage.vue.map */.vue-handler-wrapper {  position: absolute;  -webkit-transform: translate(-50%, -50%);          transform: translate(-50%, -50%);}.vue-handler-wrapper__draggable {  width: 30px;  height: 30px;  display: -webkit-box;  display: -ms-flexbox;  display: flex;  -webkit-box-align: center;      -ms-flex-align: center;          align-items: center;  -webkit-box-pack: center;      -ms-flex-pack: center;          justify-content: center;}.vue-handler-wrapper--west-north {  left: 0;  top: 0;  cursor: nw-resize;}.vue-handler-wrapper--north {  left: 50%;  top: 0;  cursor: n-resize;}.vue-handler-wrapper--east-north {  left: 100%;  top: 0;  cursor: ne-resize;}.vue-handler-wrapper--east {  left: 100%;  top: 50%;  cursor: e-resize;}.vue-handler-wrapper--east-south {  left: 100%;  top: 100%;  cursor: se-resize;}.vue-handler-wrapper--south {  left: 50%;  top: 100%;  cursor: s-resize;}.vue-handler-wrapper--west-south {  left: 0;  top: 100%;  cursor: sw-resize;}.vue-handler-wrapper--west {  left: 0;  top: 50%;  cursor: w-resize;}.vue-handler-wrapper--disabled {  cursor: auto;}/*# sourceMappingURL=HandlerWrapper.vue.map */.vue-bounding-box {  position: relative;  height: 100%;  width: 100%;}.vue-bounding-box .ghost {  position: absolute;  border: solid 1px #EEE;  pointer-events: none;  display: none;}/*# sourceMappingURL=BoundingBox.vue.map */")}}]);